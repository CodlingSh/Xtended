/*
    Javascript file for XTENDED
    Author: Sheldon Codling
    Website: www.sheldonc.ca
    Description: This stylesheet contains the custom styles for the Xtended shopify theme.
    Date: March 18th
*/

let scrollIndex = 0;

function toggleMobileNav() {
    let mobileNav = document.getElementById("mobile_nav");
    console.log("This works!");

    mobileNav.classList.toggle("menu_visible");
}

function scrollCarousel() {
    let carousel = document.getElementById("slider");
    let itemWidth = carousel.children[1].offsetWidth;
    let transitionTime = window.getComputedStyle(carousel).getPropertyValue("transition").split(" ")[1].split("s")[0] * 1000;

    console.log("Transition time is: " + transitionTime);



    scrollIndex += 1;

    carousel.style.transform = "translateX(-" + (scrollIndex * itemWidth) + "px)";

    if (scrollIndex >= carousel.children.length/2) {
        setTimeout(() => {
            scrollIndex = 0;
            carousel.style.transition = "none";
            carousel.style.transform = "translateX(0px)";
            setTimeout(() => {
                carousel.style.transition = "";
            }, 10)
        }, transitionTime);
    }
}

setInterval(scrollCarousel, 4000);

document.getElementById("burger").addEventListener("click", toggleMobileNav);
document.getElementById("close_btn").addEventListener("click", toggleMobileNav);